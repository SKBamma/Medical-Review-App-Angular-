import{a as V,b as q}from"./chunk-MR4OQB62.js";import{a as $,b as h,d as j,e as O,g as P,i as U,j as A,k as G,l as B,m as L,p as R,q as T}from"./chunk-UJIKMQO5.js";import{b as E}from"./chunk-MOBWSTXB.js";import{b as N}from"./chunk-523367XX.js";import{a as k,b as D}from"./chunk-MFJWH2YW.js";import{h as _,k as I}from"./chunk-OKUQG4XM.js";import{Cb as x,Db as u,Ga as d,W as f,Y as y,Za as a,Zb as F,gb as p,hb as s,ib as S,ob as M,yb as g}from"./chunk-COKKNC63.js";import{d as c,e as b,f as w}from"./chunk-4RCH4JJG.js";var m=class extends Error{};m.prototype.name="InvalidTokenError";function z(i){return decodeURIComponent(atob(i).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function H(i){let e=i.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return z(e)}catch{return atob(e)}}function J(i,e){if(typeof i!="string")throw new m("Invalid token specified: must be a string");e||(e={});let t=e.header===!0?0:1,r=i.split(".")[t];if(typeof r!="string")throw new m(`Invalid token specified: missing part #${t+1}`);let o;try{o=H(r)}catch(v){throw new m(`Invalid token specified: invalid base64 for part #${t+1} (${v.message})`)}try{return JSON.parse(o)}catch(v){throw new m(`Invalid token specified: invalid json for part #${t+1} (${v.message})`)}}var K=()=>["example-form"],Q=()=>["header"],W=()=>["example-full-width"],X=()=>["example-button-row"],be=(()=>{var e,t,r;let o=class o{constructor(){b(this,e);b(this,t);b(this,r);w(this,e,f(E)),w(this,t,f(I)),w(this,r,f(_)),this.form=f(G).group({email:["",[h.required,h.email]],password:["",[h.required,h.minLength(5)]]})}onSignIn(){c(this,e).userSignin(this.form.value).subscribe({next:l=>{if(l.success){let n=J(l.data);c(this,e).$state.set({_id:n._id,fullname:n.fullname,email:n.email,jwt:l.data}),c(this,t).success("Signin was successful!"),c(this,r).navigate(["","medications","list-medications"])}},error:l=>{c(this,t).error("Invalid user or password!")}})}};e=new WeakMap,t=new WeakMap,r=new WeakMap,o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=y({type:o,selectors:[["app-signin"]],standalone:!0,features:[x],decls:14,vars:12,consts:[[3,"ngSubmit","ngClass","formGroup"],[3,"ngClass"],["type","text","matInput","","formControlName","email","placeholder","Ex. sb@miu.edu"],["type","password","matInput","","formControlName","password","placeholder","Ex. oewrerbvc@2145%"],["mat-flat-button","","type","submit",3,"disabled"]],template:function(n,C){n&1&&(p(0,"form",0),M("ngSubmit",function(){return C.onSignIn()}),p(1,"h3",1),g(2,"Welcome to signin"),s(),p(3,"mat-form-field",1)(4,"mat-label"),g(5,"Email"),s(),S(6,"input",2),s(),p(7,"mat-form-field",1)(8,"mat-label"),g(9,"Password"),s(),S(10,"input",3),s(),p(11,"div",1)(12,"button",4),g(13,"Login"),s()()()),n&2&&(a("ngClass",u(7,K))("formGroup",C.form),d(),a("ngClass",u(8,Q)),d(2),a("ngClass",u(9,W)),d(4),a("ngClass",u(10,W)),d(4),a("ngClass",u(11,X)),d(),a("disabled",C.form.invalid))},dependencies:[B,P,$,j,O,U,A,D,k,T,R,L,q,V,F,N],styles:[".example-form[_ngcontent-%COMP%]{width:80%;border:1px solid red;border-radius:15px;margin:10% 5% 5%;background-color:#c7e6ad}.example-full-width[_ngcontent-%COMP%]{width:60%;margin-left:15%;margin-top:5%}.example-button-row[_ngcontent-%COMP%]{margin-top:7%;margin-left:30%;margin-bottom:10%}.header[_ngcontent-%COMP%]{margin-left:25%;color:#4169e1;margin-top:10%}"]});let i=o;return i})();export{be as SigninComponent};
