import{a as M,b as u,d as R,e as N,g as E,h as O,i as P,j as V,k as D,l as G,m as U,p as I,q as T}from"./chunk-UJIKMQO5.js";import{a as q}from"./chunk-VJEXXJ2S.js";import{a as _}from"./chunk-PCOHNBFV.js";import{h as F,k as y}from"./chunk-OKUQG4XM.js";import{Cb as x,Db as l,Ga as m,W as a,Y as b,Za as t,Zb as S,gb as s,hb as i,ib as w,ob as C,yb as d}from"./chunk-COKKNC63.js";import{d as p,e as g,f as h}from"./chunk-4RCH4JJG.js";var j=()=>["example-form"],k=()=>["updateReview"],A=()=>["example-full-width"],B=()=>["example-button-row"],ie=(()=>{var r,o;let n=class n{constructor(){g(this,r);g(this,o);this.reviewService=a(q),this.medicationService=a(_),h(this,r,a(F)),h(this,o,a(y)),this.form=a(D).group({review:["",u.required],rating:[1,[u.required,u.min(1),u.max(5)]]});let e=p(this,r).getCurrentNavigation();e?.extras.state&&(this.reviews=e.extras.state.review,this.medication=e.extras.state,this.reviews&&this.medication&&this.form.patchValue({review:this.reviews.review,rating:this.reviews.rating}))}submitReviewUpdate(){this.form.valid&&this.reviewService.updateReview(this.medication.med._id,this.reviews._id,this.form.value).subscribe(e=>{e.success?(p(this,o).success("Review updated successfully"),p(this,r).navigate(["medications","details"])):p(this,o).error("Failed to update review")})}};r=new WeakMap,o=new WeakMap,n.\u0275fac=function(c){return new(c||n)},n.\u0275cmp=b({type:n,selectors:[["app-update-review"]],standalone:!0,features:[x],decls:14,vars:12,consts:[[3,"ngSubmit","ngClass","formGroup"],[3,"ngClass"],["type","text","matInput","","formControlName","review","placeholder","Ex. Helped to reduce pain!"],["type","number","matInput","","formControlName","rating","placeholder","Ex. 1-5!"],["mat-flat-button","","type","submit",3,"disabled"]],template:function(c,v){c&1&&(s(0,"form",0),C("ngSubmit",function(){return v.submitReviewUpdate()}),s(1,"h3",1),d(2,"Update Review"),i(),s(3,"mat-form-field",1)(4,"mat-label"),d(5,"Write Review"),i(),w(6,"input",2),i(),s(7,"mat-form-field",1)(8,"mat-label"),d(9,"Rating out of 5"),i(),w(10,"input",3),i(),s(11,"div",1)(12,"button",4),d(13,"Submit"),i()()()),c&2&&(t("ngClass",l(7,j))("formGroup",v.form),m(),t("ngClass",l(8,k)),m(2),t("ngClass",l(9,A)),m(4),t("ngClass",l(10,A)),m(4),t("ngClass",l(11,B)),m(),t("disabled",v.form.invalid))},dependencies:[G,E,M,O,R,N,P,V,S,T,I,U],styles:[".example-form[_ngcontent-%COMP%]{width:80%;border:1px solid red;border-radius:15px;margin:10% 5% 5%;background-color:#c7e6ad}.example-full-width[_ngcontent-%COMP%]{width:60%;margin-left:15%;margin-top:5%}.example-button-row[_ngcontent-%COMP%]{margin-top:7%;margin-left:30%;margin-bottom:10%}.fileInput[_ngcontent-%COMP%]{margin:15%}.updateReview[_ngcontent-%COMP%]{margin-left:30%}"]});let f=n;return f})();export{ie as UpdateReviewComponent};
